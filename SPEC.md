# JochungCam for Mac — 제품 스펙

## 1. 제품 정의

**한 줄:** 맥에서 가장 빠르고 가볍게 화면을 GIF로 만드는 앱.

**핵심 가치:**
- **빠름** — 캡처 시작까지 2클릭 이하
- **가벼움** — 앱 용량 2MB 이하, 메모리 100MB 이하
- **고화질** — libimagequant 기반 꿀캠급 GIF 품질
- **간편함** — 배울 거 없음. 열면 바로 씀.

**타겟 유저:**
- 움짤 만드는 사람 (커뮤니티, 블로그, 슬랙)
- 버그 리포트용 화면 캡처
- 게임/애니 프레임 분석

**비교 대상:** 꿀캠 (Windows), Kap, GIPHY Capture, CleanShot X

---

## 2. 유저 플로우

### Flow A: 화면 캡처 → GIF (메인)
```
[앱 실행] → [영역 선택] → [녹화] → [미리보기+간편편집] → [저장]
   1클릭      드래그        자동       자동진입              1클릭
```

### Flow B: 파일 → GIF 변환
```
[앱 실행] → [파일 드래그&드롭 or 열기] → [편집] → [저장]
```

### Flow C: 메뉴바 퀵캡처 (향후)
```
[메뉴바 아이콘 클릭] → [영역 선택] → [녹화] → [자동 저장]
```

---

## 3. UI/UX 설계

### 3.1 앱 구조 (3개 화면)

#### 화면 1: 홈 (캡처 대기)
```
┌─────────────────────────────────┐
│          🍯 JochungCam            │
│                                 │
│    ┌───────────────────────┐    │
│    │                       │    │
│    │   [  📹 캡처 시작  ]  │    │
│    │                       │    │
│    │   ── 또는 ──          │    │
│    │                       │    │
│    │   파일을 여기에 드롭   │    │
│    │                       │    │
│    └───────────────────────┘    │
│                                 │
│  FPS: [10] [15] [●20] [25] [30]│
│  커서 캡처: [✓]                 │
│                                 │
│  ⌘⇧G 캡처  ⌘⇧S 빠른저장       │
└─────────────────────────────────┘
```
- **크기:** 400×300 (컴팩트)
- **드래그&드롭** 지원 (GIF/영상/이미지)
- 설정은 최소한만 노출 (FPS, 커서)
- 녹화 시작 = 창이 숨겨지고 영역 선택 오버레이

#### 화면 2: 녹화 중 (플로팅 바)
```
┌──────────────────────────────────────┐
│ 🔴 REC  00:03.2  47f  │ ⏸ │ ⏹ 완료 │
└──────────────────────────────────────┘
```
- **플로팅 미니 바** — 화면 하단 중앙, 항상 위
- 드래그로 위치 이동 가능
- 최소한의 정보: 시간, 프레임수
- 일시정지 / 완료 버튼만
- ESC = 완료
- 녹화 영역 테두리 표시 (노란 점선)

#### 화면 3: 편집 + 저장
```
┌──────────────────────────────────────────┐
│ ◀ 새로녹화               예상: ~1.2MB    │
├──────────────────────────────────────────┤
│                                          │
│              [프리뷰 영역]               │
│              (재생 애니메이션)             │
│                                          │
├──────────────────────────────────────────┤
│ ◁ ▶ ‖  1x ▼  │ 프레임 23/47  0.05s     │
├──────────────────────────────────────────┤
│ [|||||||||||||||||||||||||||||||||||||||] │
│  ← 타임라인 (프레임 썸네일 스크롤) →      │
├──────────────────────────────────────────┤
│                                          │
│  품질: [● High] [Med] [Low] [Tiny]       │
│  디더링: [✓]   최대너비: [____]px        │
│                                          │
│  [프레임 삭제]  [속도 ±]  [자르기]        │
│                                          │
│          [ 💾 GIF 저장 ]                 │
│          [ 📋 클립보드 복사 ]             │
│                                          │
└──────────────────────────────────────────┘
```
- **자동 재생** — 편집 진입 시 바로 프리뷰 재생
- **프레임 타임라인** — 가로 스크롤, 클릭으로 프레임 선택
- **편집 기능 (최소한만):**
  - 프레임 삭제 (선택 or 범위)
  - 속도 조절 (0.5x ~ 3x)
  - 자르기 (크롭)
  - 리사이즈 (최대 너비)
- **저장 옵션:**
  - GIF 품질 (256/128/64/32색)
  - 디더링 on/off
  - 최대 너비 (px)
- **클립보드 복사** — 저장 없이 바로 붙여넣기 가능
- **파일 사이즈 미리보기** — 저장 전 예상 크기 표시

### 3.2 영역 선택 오버레이
```
┌─────────────────────────────────────────┐
│▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓│
│▓▓▓▓▓┌─────────────────────┐▓▓▓▓▓▓▓▓▓▓▓│
│▓▓▓▓▓│                     │▓▓▓▓▓▓▓▓▓▓▓│
│▓▓▓▓▓│    (선택 영역)       │▓▓▓▓▓▓▓▓▓▓▓│
│▓▓▓▓▓│                     │▓▓▓▓▓▓▓▓▓▓▓│
│▓▓▓▓▓└─────────────────────┘▓▓▓▓▓▓▓▓▓▓▓│
│▓▓▓▓▓  640×480  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓│
│▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓│
└─────────────────────────────────────────┘
  ESC: 취소  |  드래그: 영역 선택
```
- 전체 화면 반투명 오버레이 (어두운 마스크)
- 선택 영역만 투명 (실시간 보임)
- 노란색 테두리
- 사이즈 라벨 (px)
- ESC 취소

### 3.3 크롭 모드
```
┌──────────────────────────────┐
│     [프리뷰 + 크롭 핸들]     │
│     ┌──────────────┐        │
│     │   ●─────────●│        │
│     │   │  크롭    ││        │
│     │   │  영역    ││        │
│     │   ●─────────●│        │
│     └──────────────┘        │
│                              │
│   [취소]        [자르기 적용] │
└──────────────────────────────┘
```
- 8개 핸들 (모서리 4 + 변 4)
- 드래그로 크롭 영역 조절
- 실시간 크기 표시

---

## 4. 기술 스펙

### 4.1 캡처 엔진
| 항목 | 스펙 |
|---|---|
| API | ScreenCaptureKit |
| FPS | 10, 15, 20, 25, 30 (선택) |
| 해상도 | Retina (2x) → 저장시 1x로 다운스케일 |
| 커서 | 시스템 커서 캡처 (SCStreamConfiguration.showsCursor) |
| 성능 | 프레임 캡처 → 메모리 버퍼 (디스크 미사용) |
| 제한 | 최대 300프레임 (메모리 보호) or 60초 |

### 4.2 GIF 인코더
| 항목 | 스펙 |
|---|---|
| 양자화 | **libimagequant** (꿀캠과 동일) |
| 색상 | 32 / 64 / 128 / 256 선택 |
| 디더링 | Floyd-Steinberg (libimagequant 내장) |
| 속도 | libimagequant speed 1~10 (품질↔속도 트레이드오프) |
| 루프 | 무한 반복 (기본) |
| 최적화 | Retina→1x 다운스케일, 최대너비 제한, 유사프레임 스킵 |

### 4.3 편집
| 기능 | 설명 |
|---|---|
| 프레임 삭제 | 개별 / 범위 선택 후 삭제 |
| 속도 조절 | 0.5x ~ 3x (전체 프레임 duration 조절) |
| 자르기 | 인터랙티브 크롭 (핸들 드래그) |
| 리사이즈 | 최대 너비 지정 (비율 유지) |
| 프리뷰 | 실시간 GIF 재생 + 프레임 단위 탐색 |

### 4.4 출력
| 기능 | 설명 |
|---|---|
| GIF 저장 | NSSavePanel → 파일 저장 |
| 클립보드 | NSPasteboard에 GIF 데이터 복사 |
| Finder 표시 | 저장 후 Finder에서 파일 선택 |
| 파일명 | jochungcam_YYYYMMDD_HHmmss.gif |

---

## 5. 단축키

| 단축키 | 동작 | 컨텍스트 |
|---|---|---|
| ⌘⇧G | 캡처 시작 | 글로벌 |
| ESC | 캡처 취소 / 녹화 중지 | 오버레이/녹화 |
| Space | 일시정지/재개 | 녹화 중 |
| ⌘S | GIF 저장 | 편집 |
| ⌘C | 클립보드 복사 | 편집 |
| ← → | 이전/다음 프레임 | 편집 |
| Delete | 프레임 삭제 | 편집 |
| Space | 재생/일시정지 | 편집 |

---

## 6. 비기능 요구사항

| 항목 | 목표 |
|---|---|
| 앱 용량 | < 2MB (.app 번들) |
| 실행 속도 | < 1초 (콜드 스타트) |
| 메모리 | < 100MB (30fps 10초 기준) |
| 최소 OS | macOS 14.0 (Sonoma) |
| 의존성 | libimagequant만 (번들 포함) |
| 코드사이닝 | 추후 (개발자 인증서) |

---

## 7. 개발 단계

### Phase 1: 코어 루프 (현재)
- [x] 영역 선택
- [x] ScreenCaptureKit 녹화
- [x] libimagequant GIF 인코딩
- [ ] 플로팅 녹화 바 (현재: 앱 내 뷰)
- [ ] 프리뷰 자동 재생
- [ ] 클립보드 복사
- [ ] Retina→1x 자동 다운스케일
- [ ] 드래그&드롭 파일 임포트

### Phase 2: 편집 UX
- [ ] 인터랙티브 크롭
- [ ] 프레임 범위 선택
- [ ] 프레임 삭제 UX 개선
- [ ] 속도 슬라이더
- [ ] 파일 사이즈 실시간 추정

### Phase 3: 완성도
- [ ] 메뉴바 모드
- [ ] 글로벌 단축키
- [ ] 녹화 영역 테두리 표시
- [ ] 설정 저장 (UserDefaults)
- [ ] 첫 실행 권한 안내

---

## 8. 꿀캠 대비 의도적 제외

| 꿀캠 기능 | 제외 이유 |
|---|---|
| 필터/효과 | 핵심 아님. Preview.app에서 가능 |
| 텍스트/스티커 | 핵심 아님. 다른 앱으로 |
| WebP/WebM/MP4/APNG/AVIF | GIF 집중. 향후 WebP만 추가 고려 |
| 트랜지션 | 핵심 아님 |
| AI 업스케일링 | 향후 고려 |
| 콜라주/액자 | 제외 |
| 다국어 | 한국어/영어만 |
| 스킨 | 제외. 시스템 테마 따름 |
